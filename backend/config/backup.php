<?php

return [
    /*
    |--------------------------------------------------------------------------
    | 备份存储配置
    |--------------------------------------------------------------------------
    |
    | 配置备份文件的存储方式
    |
    */
    'disk' => env('BACKUP_DISK', 'local'),

    /*
    |--------------------------------------------------------------------------
    | 备份存储路径
    |--------------------------------------------------------------------------
    |
    | 备份文件在存储磁盘中的路径
    |
    */
    'path' => env('BACKUP_PATH', 'database_backups'),

    /*
    |--------------------------------------------------------------------------
    | 最大备份数量
    |--------------------------------------------------------------------------
    |
    | 系统保留的最大备份文件数量，超过此数量会自动删除旧备份
    |
    */
    'max_backups' => env('BACKUP_MAX_FILES', 30),

    /*
    |--------------------------------------------------------------------------
    | 自动备份配置
    |--------------------------------------------------------------------------
    |
    | 定时自动备份的配置
    |
    */
    'schedule' => [
        'enabled' => env('BACKUP_SCHEDULE_ENABLED', false),
        'frequency' => env('BACKUP_SCHEDULE_FREQUENCY', 'daily'), // daily, weekly, monthly
        'time' => env('BACKUP_SCHEDULE_TIME', '02:00'), // 备份时间 (HH:MM)
        'description' => '自动备份',
    ],

    /*
    |--------------------------------------------------------------------------
    | 压缩配置
    |--------------------------------------------------------------------------
    |
    | 是否对备份文件进行压缩
    |
    */
    'compression' => [
        'enabled' => env('BACKUP_COMPRESSION_ENABLED', false),
        'method' => env('BACKUP_COMPRESSION_METHOD', 'gzip'), // gzip, zip
    ],

    /*
    |--------------------------------------------------------------------------
    | 通知配置
    |--------------------------------------------------------------------------
    |
    | 备份完成后的通知设置
    |
    */
    'notifications' => [
        'enabled' => env('BACKUP_NOTIFICATIONS_ENABLED', false),
        'channels' => ['mail'], // mail, slack, etc.
        'success' => true, // 成功时是否通知
        'failure' => true, // 失败时是否通知
    ],

    /*
    |--------------------------------------------------------------------------
    | 数据库特定配置
    |--------------------------------------------------------------------------
    |
    | 针对不同数据库类型的特殊配置
    |
    */
    'database' => [
        'postgresql' => [
            'pg_dump_path' => env('PG_DUMP_PATH', 'pg_dump'),
            'options' => [
                '--no-owner',
                '--no-privileges',
                '--clean',
                '--if-exists',
                '--verbose',
            ],
        ],
        'mysql' => [
            'mysqldump_path' => env('MYSQLDUMP_PATH', 'mysqldump'),
            'options' => [
                '--single-transaction',
                '--routines',
                '--triggers',
                '--lock-tables=false',
            ],
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | 安全配置
    |--------------------------------------------------------------------------
    |
    | 备份文件的安全相关配置
    |
    */
    'security' => [
        'encrypt' => env('BACKUP_ENCRYPT', false),
        'password' => env('BACKUP_PASSWORD'),
    ],
]; 