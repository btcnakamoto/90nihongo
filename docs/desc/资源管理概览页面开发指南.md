# èµ„æºç®¡ç†æ¦‚è§ˆé¡µé¢å¼€å‘æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†90å¤©æ—¥è¯­å­¦ä¹ å¹³å°çš„èµ„æºç®¡ç†æ¦‚è§ˆé¡µé¢çš„å¼€å‘è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å‰ç«¯Reactç»„ä»¶å’Œåç«¯Laravel APIçš„å®Œæ•´å®ç°ã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **å®æ—¶æ•°æ®å±•ç¤º**: æ˜¾ç¤ºç³»ç»Ÿèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯
- **èµ„æºæ¦‚è§ˆ**: å±•ç¤ºæ€»èµ„æºæ•°ã€å®Œæˆèµ„æºã€æ´»è·ƒä»»åŠ¡ç­‰å…³é”®æŒ‡æ ‡
- **ä»»åŠ¡ç›‘æ§**: å®æ—¶ç›‘æ§å¯¼å…¥å’Œå¤„ç†ä»»åŠ¡çš„è¿›åº¦
- **èµ„æºç±»å‹åˆ†å¸ƒ**: å¯è§†åŒ–å±•ç¤ºä¸åŒç±»å‹èµ„æºçš„åˆ†å¸ƒæƒ…å†µ
- **æœ€è¿‘æ´»åŠ¨**: æ˜¾ç¤ºç³»ç»Ÿçš„æœ€æ–°æ“ä½œè®°å½•

### æŠ€æœ¯ç‰¹æ€§
- **è‡ªåŠ¨åˆ·æ–°**: æ¯30ç§’è‡ªåŠ¨åˆ·æ–°æ•°æ®
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **åŠ è½½çŠ¶æ€**: ä¼˜é›…çš„åŠ è½½å’Œåˆ·æ–°çŠ¶æ€æ˜¾ç¤º

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18**: ä¸»è¦UIæ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨
- **Tailwind CSS**: æ ·å¼æ¡†æ¶
- **Lucide React**: å›¾æ ‡åº“
- **Axios**: HTTPå®¢æˆ·ç«¯

### åç«¯æŠ€æœ¯æ ˆ
- **Laravel 11**: PHPæ¡†æ¶
- **MySQL**: æ•°æ®åº“
- **Sanctum**: APIè®¤è¯
- **é˜Ÿåˆ—ç³»ç»Ÿ**: å¼‚æ­¥ä»»åŠ¡å¤„ç†

## æ–‡ä»¶ç»“æ„

### å‰ç«¯æ–‡ä»¶
```
frontend-admin/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ ResourceOverview.tsx          # èµ„æºæ¦‚è§ˆé¡µé¢ä¸»ç»„ä»¶
â”œâ”€â”€ services/
â”‚   â””â”€â”€ resourceService.ts            # èµ„æºç®¡ç†APIæœåŠ¡
â”œâ”€â”€ components/admin/
â”‚   â””â”€â”€ AdminSidebar.tsx             # ä¾§è¾¹æ å¯¼èˆªï¼ˆå·²æ›´æ–°ï¼‰
â””â”€â”€ App.tsx                          # è·¯ç”±é…ç½®ï¼ˆå·²æ›´æ–°ï¼‰
```

### åç«¯æ–‡ä»¶
```
backend/
â”œâ”€â”€ app/Http/Controllers/Admin/
â”‚   â””â”€â”€ ResourceController.php       # èµ„æºç®¡ç†æ§åˆ¶å™¨
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ admin.php                    # ç®¡ç†å‘˜è·¯ç”±é…ç½®
â””â”€â”€ bootstrap/
    â””â”€â”€ app.php                      # åº”ç”¨é…ç½®ï¼ˆå·²æ›´æ–°ï¼‰
```

## APIæ¥å£æ–‡æ¡£

### åŸºç¡€URL
```
http://127.0.0.1:8000/api/admin/resources
```

### è®¤è¯
æ‰€æœ‰APIè¯·æ±‚éœ€è¦åœ¨Headerä¸­åŒ…å«Bearer Tokenï¼š
```
Authorization: Bearer {token}
```

### æ¥å£åˆ—è¡¨

#### 1. è·å–èµ„æºç»Ÿè®¡ä¿¡æ¯
```http
GET /api/admin/resources/stats
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "status": "success",
  "data": {
    "total_resources": 1250,
    "completed_resources": 1180,
    "failed_resources": 15,
    "active_tasks": 3,
    "total_size": "2.5 GB",
    "success_rate": 94.4,
    "resource_by_type": {
      "course": 45,
      "material": 320,
      "vocabulary": 650,
      "audio": 180,
      "video": 55
    },
    "recent_activities": [
      {
        "id": "1",
        "action": "å¯¼å…¥å®Œæˆ",
        "resource_name": "NHKæ–°é—»è¯¾ç¨‹",
        "created_at": "2024-01-15T10:30:00Z"
      }
    ]
  }
}
```

#### 2. è·å–èµ„æºåˆ—è¡¨
```http
GET /api/admin/resources?page=1&per_page=15
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "status": "success",
  "data": {
    "data": [
      {
        "id": "1",
        "name": "NHKæ–°é—»è¯¾ç¨‹",
        "type": "course",
        "source": "web-scraping",
        "status": "completed",
        "progress": 100,
        "created_at": "2024-01-15T10:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z",
        "count": 45
      }
    ],
    "meta": {
      "current_page": 1,
      "last_page": 10,
      "per_page": 15,
      "total": 150
    }
  }
}
```

#### 3. è·å–ä»»åŠ¡åˆ—è¡¨
```http
GET /api/admin/resources/tasks?page=1&per_page=15
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "status": "success",
  "data": {
    "data": [
      {
        "id": "1",
        "type": "web-scraping",
        "name": "æŠ“å–NHKæ–°é—»",
        "status": "running",
        "progress": 75.5,
        "total_items": 100,
        "items_processed": 75,
        "logs": [
          "å¼€å§‹æŠ“å–...",
          "å·²å¤„ç†75é¡µ",
          "æ­£åœ¨å¤„ç†éŸ³é¢‘æ–‡ä»¶..."
        ],
        "created_at": "2024-01-15T09:00:00Z",
        "updated_at": "2024-01-15T10:15:00Z"
      }
    ]
  }
}
```

## å‰ç«¯ç»„ä»¶è¯¦è§£

### ResourceOverviewç»„ä»¶

#### ä¸»è¦åŠŸèƒ½
1. **æ•°æ®åˆå§‹åŒ–**: é¡µé¢åŠ è½½æ—¶è·å–æ‰€æœ‰å¿…è¦æ•°æ®
2. **å®šæ—¶åˆ·æ–°**: æ¯30ç§’è‡ªåŠ¨åˆ·æ–°æ•°æ®
3. **æ‰‹åŠ¨åˆ·æ–°**: ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨è§¦å‘æ•°æ®åˆ·æ–°
4. **é”™è¯¯å¤„ç†**: ç½‘ç»œé”™è¯¯å’ŒAPIé”™è¯¯çš„å¤„ç†

#### çŠ¶æ€ç®¡ç†
```typescript
const [stats, setStats] = useState<ResourceStats | null>(null);
const [recentResources, setRecentResources] = useState<ResourceItem[]>([]);
const [activeTasks, setActiveTasks] = useState<ImportTask[]>([]);
const [isLoading, setIsLoading] = useState(true);
const [isRefreshing, setIsRefreshing] = useState(false);
```

#### æ ¸å¿ƒæ–¹æ³•
- `initializeData()`: åˆå§‹åŒ–æ•°æ®åŠ è½½
- `loadStats()`: åŠ è½½ç»Ÿè®¡ä¿¡æ¯
- `loadRecentResources()`: åŠ è½½æœ€æ–°èµ„æº
- `loadActiveTasks()`: åŠ è½½æ´»è·ƒä»»åŠ¡
- `refreshData()`: åˆ·æ–°æ‰€æœ‰æ•°æ®

### ResourceServiceæœåŠ¡

#### ä¸»è¦æ–¹æ³•
- `getStats()`: è·å–ç»Ÿè®¡ä¿¡æ¯
- `getResources()`: è·å–èµ„æºåˆ—è¡¨
- `getTasks()`: è·å–ä»»åŠ¡åˆ—è¡¨
- `startWebScraping()`: å¯åŠ¨ç½‘é¡µæŠ“å–
- `uploadFiles()`: æ–‡ä»¶ä¸Šä¼ 
- `toggleTask()`: æš‚åœ/æ¢å¤ä»»åŠ¡

## éƒ¨ç½²å’Œè¿è¡Œ

### åç«¯å¯åŠ¨
```bash
cd backend
php artisan serve --host=127.0.0.1 --port=8000
```

### å‰ç«¯å¯åŠ¨
```bash
cd frontend-admin
npm run dev
```

### è®¿é—®åœ°å€
- å‰ç«¯ç®¡ç†ç•Œé¢: http://localhost:5173
- èµ„æºæ¦‚è§ˆé¡µé¢: http://localhost:5173/admin/resources/overview
- åç«¯API: http://127.0.0.1:8000/api/admin

## å¼€å‘çŠ¶æ€

### âœ… å·²å®ŒæˆåŠŸèƒ½
1. **åç«¯APIå¼€å‘**
   - ResourceControlleræ§åˆ¶å™¨å®Œæ•´å®ç°
   - è·¯ç”±é…ç½®æ­£ç¡®è®¾ç½®
   - æ•°æ®åº“æ¨¡å‹å’Œè¿ç§»
   - APIè®¤è¯å’Œæƒé™æ§åˆ¶

2. **å‰ç«¯ç»„ä»¶å¼€å‘**
   - ResourceOverviewé¡µé¢ç»„ä»¶
   - ResourceService APIæœåŠ¡
   - ä¾§è¾¹æ å¯¼èˆªæ›´æ–°
   - è·¯ç”±é…ç½®æ›´æ–°

3. **åŠŸèƒ½ç‰¹æ€§**
   - å®æ—¶æ•°æ®å±•ç¤º
   - è‡ªåŠ¨åˆ·æ–°æœºåˆ¶
   - é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
   - å“åº”å¼è®¾è®¡
   - åŠ è½½çŠ¶æ€ç®¡ç†

### ğŸ”„ æµ‹è¯•éªŒè¯
- åç«¯APIè·¯ç”±æ­£ç¡®é…ç½® âœ…
- APIè®¤è¯æœºåˆ¶æ­£å¸¸å·¥ä½œ âœ…
- å‰ç«¯ç»„ä»¶æ­£ç¡®æ¸²æŸ“ âœ…
- æ•°æ®æµæ­£å¸¸å·¥ä½œ âœ…

### ğŸ“‹ åç»­ä¼˜åŒ–
1. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°æ•°æ®ç¼“å­˜
   - ä¼˜åŒ–APIæŸ¥è¯¢æ€§èƒ½
   - æ·»åŠ åˆ†é¡µåŠ è½½

2. **ç”¨æˆ·ä½“éªŒ**
   - æ·»åŠ æ›´å¤šå›¾è¡¨å±•ç¤º
   - å®ç°å®æ—¶WebSocketæ›´æ–°
   - æ·»åŠ å¯¼å‡ºåŠŸèƒ½

3. **åŠŸèƒ½æ‰©å±•**
   - æ·»åŠ èµ„æºæœç´¢å’Œè¿‡æ»¤
   - å®ç°æ‰¹é‡æ“ä½œ
   - æ·»åŠ ä»»åŠ¡è°ƒåº¦åŠŸèƒ½

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **API 404é”™è¯¯**
   - æ£€æŸ¥è·¯ç”±é…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤bootstrap/app.phpåŒ…å«adminè·¯ç”±
   - éªŒè¯LaravelæœåŠ¡å™¨æ˜¯å¦è¿è¡Œ

2. **è®¤è¯å¤±è´¥**
   - æ£€æŸ¥tokenæ˜¯å¦æ­£ç¡®è®¾ç½®
   - ç¡®è®¤ç”¨æˆ·æ˜¯å¦æœ‰ç®¡ç†å‘˜æƒé™
   - éªŒè¯Sanctumé…ç½®

3. **å‰ç«¯ç»„ä»¶é”™è¯¯**
   - æ£€æŸ¥TypeScriptç±»å‹å®šä¹‰
   - ç¡®è®¤æ‰€æœ‰ä¾èµ–æ­£ç¡®å®‰è£…
   - éªŒè¯APIæœåŠ¡é…ç½®

### è°ƒè¯•å·¥å…·
- Laravelæ—¥å¿—: `storage/logs/laravel.log`
- æµè§ˆå™¨å¼€å‘è€…å·¥å…·ç½‘ç»œé¢æ¿
- Reactå¼€å‘è€…å·¥å…·

## æ€»ç»“

èµ„æºç®¡ç†æ¦‚è§ˆé¡µé¢å·²ç»æˆåŠŸå¼€å‘å®Œæˆï¼Œå®ç°äº†å®Œæ•´çš„å‰åç«¯å¯¹æ¥ã€‚ç³»ç»Ÿå…·å¤‡äº†å®æ—¶æ•°æ®å±•ç¤ºã€ä»»åŠ¡ç›‘æ§ã€é”™è¯¯å¤„ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸º90å¤©æ—¥è¯­å­¦ä¹ å¹³å°çš„èµ„æºç®¡ç†æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚

é€šè¿‡æœ¬æ¬¡å¼€å‘ï¼Œå»ºç«‹äº†å®Œæ•´çš„èµ„æºç®¡ç†æ¶æ„ï¼Œä¸ºåç»­åŠŸèƒ½æ‰©å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚ 